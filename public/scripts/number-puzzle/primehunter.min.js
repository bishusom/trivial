function initPuzzle(){let l=document.getElementById("hunter-grid"),s=document.getElementById("hunter-feedback");var e=document.getElementById("hunter-hint"),t=document.getElementById("hunter-new");let n=document.getElementById("hunter-level"),r=document.getElementById("hunter-score"),a=document.getElementById("hunter-time"),c=document.getElementById("primes-found"),i=document.getElementById("primes-total"),o=document.getElementById("progress-fill"),d=1,m=0,u=60,f,h=0,v=0,g=[],I=!1;function L(){clearInterval(f),d=1,m=0,u=60,v=0,C(),y(),E(),I=!0}function y(){l.innerHTML="",g=[],h=0;var t=d<=3?4:d<=6?5:6,r=d<=2?30:d<=4?50:d<=6?75:100;for(let e=0;e<t*t;e++){var a=Math.floor(Math.random()*r)+1;g.push(a);let n=document.createElement("div");n.className="hunter-cell",n.textContent=a,n.dataset.number=a,n.dataset.isPrime=(t=>{if(t<=1)return!1;if(!(t<=3)){if(t%2==0||t%3==0)return!1;for(let e=5;e*e<=t;e+=6)if(t%e==0||t%(e+2)==0)return!1}return!0})(a),"true"===n.dataset.isPrime&&h++,n.addEventListener("click",()=>{var e,t;e=n,I&&(parseInt(e.dataset.number),t="true"===e.dataset.isPrime,e.classList.contains("selected")||(e.classList.add("selected"),t?(e.classList.add("correct"),v++,m+=5*d,C(),p(),v===h&&(I=!1,clearInterval(f),s.textContent=`Level Complete! +${20*d} bonus points!`,s.className="hunter-feedback correct",m+=20*d,d++,C(),setTimeout(()=>{u=60,v=0,I=!0,y(),E()},2e3))):(e.classList.add("wrong"),u=Math.max(5,u-5),C())))}),l.appendChild(n)}i.textContent=h,c.textContent=v,p(),l.style.gridTemplateColumns=`repeat(${t}, 1fr)`}function E(){clearInterval(f),f=setInterval(()=>{u--,a.textContent=`Time: ${u}s`,u<=10&&a.classList.add("time-critical"),u<=0&&(clearInterval(f),I=!1,s.textContent="Game Over! Final Score: "+m,s.className="hunter-feedback wrong",document.querySelectorAll(".hunter-cell").forEach(e=>{"true"!==e.dataset.isPrime||e.classList.contains("correct")||e.classList.add("missed")}))},1e3)}function C(){n.textContent="Level: "+d,r.textContent="Score: "+m,a.textContent=`Time: ${u}s`,c.textContent=v}function p(){var e=0<h?v/h*100:0;o.style.width=e+"%"}L(),e.addEventListener("click",function(){if(I){var t=Array.from(document.querySelectorAll(".hunter-cell")).filter(e=>"true"===e.dataset.isPrime&&!e.classList.contains("correct"));if(0<t.length){let e=t[Math.floor(Math.random()*t.length)];e.classList.add("hint"),setTimeout(()=>{e.classList.remove("hint")},1e3)}else s.textContent="No primes left to find!",s.className="hunter-feedback info"}}),t.addEventListener("click",L)}export{initPuzzle};
