let categoryGroupClickHandlers=[];document.addEventListener("DOMContentLoaded",()=>{var e=()=>{e=new Date,(a=new Date(e)).setHours(24,0,0,0),(r=new Date(e)).setDate(r.getDate()+(7-e.getDay())),r.setHours(0,0,0,0),t=new Date(e.getFullYear(),e.getMonth()+1,0).getDate();var e,t,a={daily:Math.floor((a-e)/36e5),weekly:Math.ceil((r-e)/864e5),monthly:t-e.getDate()+1},r=(e,t,a)=>{var r=document.querySelector(`[data-category="${e}"]`);r&&(r=r.querySelector("span"))&&(r.innerHTML=t+` (${"Daily"===e?"Resets":"Weekly"===e?"Expires":"New Quiz"} in <b>${a} ${"Daily"===e?"hrs":"days"}</b>)`)};r("Daily","Daily Quiz",a.daily),r("Weekly","Weekly Quiz",a.weekly),r("Monthly","Monthly Quiz",a.monthly)};e(),setInterval(e,36e5);let t=document.querySelector(".setup-screen"),f=document.getElementById("dynamic-content"),o=document.querySelector(".hamburger"),n=document.querySelector(".nav-menu"),a=document.querySelector(".scroll-indicator"),r=document.querySelector(".scroll-arrow"),l=null,b=window.location.pathname,L=!1;function i(){categoryGroupClickHandlers.forEach(({group:e,handler:t})=>{e&&(e=e.querySelector(".group-header"))&&e.removeEventListener("click",t)}),categoryGroupClickHandlers=[];let a=window.innerWidth<=768;document.querySelectorAll(".category-group").forEach(e=>{var t=e.querySelector(".group-header");t&&(a?(e.classList.remove("active"),t.addEventListener("click",t=()=>e.classList.toggle("active")),categoryGroupClickHandlers.push({group:e,handler:t})):e.classList.add("active"))})}function s(t){l&&(l.style.display="none",(i=l.closest(".dropdown").querySelector(".dropdown-toggle"))&&i.setAttribute("aria-expanded","false"),l=null),n&&n.classList.remove("active"),o&&(o.setAttribute("aria-expanded","false"),i=o.querySelector(".material-icons"))&&(i.textContent="menu");var a,r,i=document.querySelector(".game-screen");if(i&&i.classList.contains("active")&&!document.querySelector(".summary-screen.active")){i=t;let e=document.getElementById("nav-warning-modal");e?(e.classList.remove("hidden"),window.pendingNavigation=i,a=document.getElementById("continue-game"),r=document.getElementById("end-game"),a&&(a.onclick=()=>{e.classList.add("hidden"),window.pendingNavigation=null}),r&&(r.onclick=()=>{e.classList.add("hidden"),"function"==typeof window.endGame&&(window.endGame(),localStorage.removeItem("triviaMasterGameState")),window.pendingNavigation&&(window.history.pushState({path:window.pendingNavigation},"",window.pendingNavigation),c(window.pendingNavigation),window.pendingNavigation=null)})):(window.history.pushState({path:i},"",i),c(i))}else window.history.pushState({path:t},"",t),c(t)}async function c(t){if(t!==b&&!L){L=!0;var a=(t="/"===(b=t)?"/home":t.replace(/\/$/,"")).split("/").filter(e=>e),e=0<a.length?"/"+a[0]:"/home";{var r=a;var i={"/home":"Triviaah - Play Trivia Games","/privacy":"Triviaah - Privacy Policy","/contact":"Triviaah - Contact Us","/trivias":r[1]?`Triviaah - ${r[1].replace(/-/g," ")} Trivia`:"Triviaah - Trivia Catalog","/number-puzzle":r[1]?`Triviaah - ${r[1].replace(/-/g," ")} Number Puzzle`:"Triviaah - Number Puzzle Catalog","/word-game":r[1]?`Triviaah - ${r[1].replace(/-/g," ")} Word Game`:"Triviaah - Word Game Catalog"},o={"/home":"Play fun and challenging trivia games on Triviaah!","/privacy":"Read the privacy policy for Triviaah to understand how we handle your data.","/contact":"Get in touch with Triviaah for support or inquiries.","/trivias":r[1]?`Play ${r[1].replace(/-/g," ")} trivia games on Triviaah! Test your knowledge now.`:"Explore a variety of trivia games on Triviaah.","/number-puzzle":r[1]?`Solve ${r[1].replace(/-/g," ")} number puzzles on Triviaah! Challenge your math skills.`:"Discover fun number puzzles on Triviaah.","/word-game":r[1]?`Play ${r[1].replace(/-/g," ")} word games on Triviaah! Test your vocabulary skills.`:"Enjoy word games on Triviaah."},r=0<r.length?"/"+r[0]:"/home";document.title=i[r]||"Triviaah";let e=document.querySelector('meta[name="description"]');e||((e=document.createElement("meta")).name="description",document.head.appendChild(e)),e.content=o[r]||"Play fun and challenging games on Triviaah!"}"undefined"!=typeof gtag&&(i=a[1]?a[1].replace(/-/g," "):a[0]||"Home",gtag("event","navigate",{event_category:"Page View",event_label:i,path:t})),document.querySelectorAll(".screen").forEach(e=>{e&&e.classList.remove("active")});var n,l,s,c,d,u,m,g,v,p,h,y,w,o={"/trivias":["daily","weekly","monthly","general-knowledge","literature","arts","animals","science","history","fashion","festivals","geography","movies","tv","music","celebrities","politics","food","sports","business","mythology","philosophy","video-games","board-games","catalog","tbank"],"/number-puzzle":["guess","scramble","sequence","primehunter","numbertower","sodoku","catalog"],"/word-game":["classic","anagram","spelling","boggle","wordsearch","wordladder","wordcircle","catalog"]};try{t.includes("/privacy")?await S("/templates/privacy.html",f):t.includes("/contact")?await S("/templates/contact.html",f):"/home"===t||o[e]&&1===a.length?q():t.startsWith("/trivias")?"catalog"===(n=a[1])?(document.body.classList.remove("game-screen-active"),await S("/templates/trivias/catalog.html",f),l=(await import("/scripts/trivias/catalog.min.js")).initTriviaCatalog,l()):o["/trivias"].includes(n)?(c=((s=document.querySelector(".main-nav"))&&s.classList.add("hidden"),await S("/templates/trivias/trivia.html",f),await import("/scripts/trivias/trivia.min.js")).initTriviaGame,c(n.replace(/-/g," "))):q():t.startsWith("/number-puzzle")?"catalog"===(d=a[1])?((u=document.querySelector(".main-nav"))&&u.classList.remove("hidden"),await S("/templates/number-puzzle/catalog.html",f)):(o["/number-puzzle"].includes(d)?(g=((m=document.querySelector(".main-nav"))&&m.classList.add("hidden"),await S(`/templates/number-puzzle/${d}.html`,f),await import(`/scripts/number-puzzle/${d}.min.js`)).initPuzzle,g):q)():t.startsWith("/word-game")?"catalog"===(v=a[1])?((p=document.querySelector(".main-nav"))&&p.classList.remove("hidden"),await S("/templates/word-game/catalog.html",f)):(o["/word-game"].includes(v)?(y=((h=document.querySelector(".main-nav"))&&h.classList.add("hidden"),await S(`/templates/word-game/${v}.html`,f),await import(`/scripts/word-game/${v}.min.js`)).initWordGame,y):q)():q()}catch(e){console.error("Routing error:",e),w=t.includes("number-puzzle")?"number-puzzle":t.includes("word-game")?"word-game":"content",f&&(f.innerHTML=`
            <div class="error">
                <h3>Error Loading ${w.replace("-"," ")}</h3>
                <p>Unable to load the game. Please try again later.</p>
                <a href="/home" class="btn primary">Return Home</a>
            </div>
        `,f.classList.add("active"))}finally{L=!1}}}async function S(e,t){if(t)try{var a=await fetch(e);if(!a.ok)throw new Error("Failed to load template: "+e);t.innerHTML=await a.text(),t.classList.add("active")}catch(e){throw console.error("Template load error:",e),t.innerHTML=`
                <div class="error">
                    <h3>Error Loading Content</h3>
                    <p>Unable to load the requested page. Please try again later.</p>
                    <a href="/home" class="btn primary">Return Home</a>
                </div>
            `,t.classList.add("active"),e}}function q(){t&&t.classList.add("active"),f&&f.classList.remove("active");var e=document.querySelector(".game-screen"),e=(e&&e.classList.remove("active"),document.querySelector(".summary-screen")),e=(e&&e.classList.remove("active"),document.querySelector(".main-nav"));e&&e.classList.remove("hidden")}o&&n&&o.addEventListener("click",()=>{var e="true"===o.getAttribute("aria-expanded"),t=(o.setAttribute("aria-expanded",!e),n.classList.toggle("active"),o.querySelector(".material-icons"));t&&(t.textContent=e?"menu":"close")}),document.addEventListener("click",t=>{var a=t.target.closest(".category-card");if(a&&a.dataset.route){t.preventDefault();let e=a.dataset.route;void s(e)}else{!t.target.closest(".dropdown")&&l&&(l.style.display="none",(a=l.closest(".dropdown").querySelector(".dropdown-toggle"))&&a.setAttribute("aria-expanded","false"),l=null),!t.target.closest(".main-nav")&&n&&n.classList.contains("active")&&(n.classList.remove("active"),o)&&(o.setAttribute("aria-expanded","false"),a=o.querySelector(".material-icons"))&&(a.textContent="menu");a=t.target.closest("a[href]");if(a&&a.hostname===window.location.hostname&&!a.target&&!/\.(pdf|jpg|png)$/i.test(a.href)){t.preventDefault();let e=new URL(a.href).pathname;s(e)}}}),document.querySelectorAll(".dropdown-toggle").forEach(r=>{r.addEventListener("click",e=>{var a=e.target.closest(".dropdown");if(a){let t=a.querySelector(".dropdown-content");t&&(r.getAttribute("aria-expanded"),document.querySelectorAll(".dropdown-content").forEach(e=>{e!==t&&(e.style.display="none",e=e.closest(".dropdown").querySelector(".dropdown-toggle"))&&e.setAttribute("aria-expanded","false")}),t.style.display="block"===t.style.display?"none":"block",r.setAttribute("aria-expanded","block"===t.style.display?"true":"false"),l="block"===t.style.display?t:null,window.innerWidth<=768)&&e.preventDefault()}})}),document.querySelectorAll(".submenu-toggle").forEach(e=>{e.addEventListener("click",e=>{if(!(768<window.innerWidth)){e.preventDefault(),e.stopPropagation();let t=e.target.closest(".submenu");t&&(document.querySelectorAll(".submenu").forEach(e=>{e&&e!==t&&e.classList.remove("active")}),t.classList.toggle("active"))}})}),i(),window.addEventListener("resize",()=>setTimeout(i,100)),a&&r&&(e=()=>{var e;t&&t.classList.contains("active")?(a.style.display="flex",e=window.scrollY+window.innerHeight>=document.documentElement.scrollHeight-10,r.textContent=e?"keyboard_arrow_up":"keyboard_arrow_down"):a.style.display="none"},a.addEventListener("click",()=>{var e=window.scrollY+window.innerHeight>=document.documentElement.scrollHeight-10;window.scrollTo({top:e?0:document.documentElement.scrollHeight,behavior:"smooth"})}),window.addEventListener("scroll",e),window.addEventListener("resize",e),e()),(window.handleRouting=c)(b)});
